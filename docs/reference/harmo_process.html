<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate harmonized dataset(s) and annotated data processing elements file — harmo_process • harmonizR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generate harmonized dataset(s) and annotated data processing elements file — harmo_process" />
<meta property="og:description" content="Reads DataSchema and data processing elements R objects to generate harmonized dataset(s)
and annotated data processing elements file with harmonization status and errors.
The function uses DataSchema and data processing elements specifications
to process input study-specific variables into study harmonized variables.
Documentation of each data processing action is generated in the console to support
the identification of errors and correction of the data processing elements file
and objects, as needed. An annotated data processing elements file is also produced
providing harmonization status (complete/impossible) for each DataSchema variable
in each study-specific dataset, which can be used to create a summary of harmonization
potential of DataSchema variables across study-specific datasets." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">harmonizR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/main_usage.html">Main usage of harmonizR</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/maelstrom-research/harmonizR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate harmonized dataset(s) and annotated data processing elements file</h1>
    <small class="dont-index">Source: <a href='https://github.com/maelstrom-research/harmonizR/blob/master/R/06-harmo_process_harmonization.R'><code>R/06-harmo_process_harmonization.R</code></a></small>
    <div class="hidden name"><code>harmo_process.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Reads DataSchema and data processing elements R objects to generate harmonized dataset(s)
and annotated data processing elements file with harmonization status and errors.
The function uses DataSchema and data processing elements specifications
to process input study-specific variables into study harmonized variables.
Documentation of each data processing action is generated in the console to support
the identification of errors and correction of the data processing elements file
and objects, as needed. An annotated data processing elements file is also produced
providing harmonization status (complete/impossible) for each DataSchema variable
in each study-specific dataset, which can be used to create a summary of harmonization
potential of DataSchema variables across study-specific datasets.</p>
    </div>

    <pre class="usage"><span class='fu'>harmo_process</span><span class='op'>(</span>
  <span class='va'>dataschema</span>,
  <span class='va'>data_proc_elem</span>,
  output_harmo_folder <span class='op'>=</span> <span class='st'>"harmonized_datasets"</span>,
  name_report <span class='op'>=</span> <span class='st'>"annotated_data_proc_elem"</span>,
  .envir <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dataschema</th>
      <td><p>A character string or list of two tibbles (Variables and Categories)
identifying the DataSchema.</p></td>
    </tr>
    <tr>
      <th>data_proc_elem</th>
      <td><p>A character string or tibble R object identifying the data
processing elements file.</p></td>
    </tr>
    <tr>
      <th>output_harmo_folder</th>
      <td><p>A character string specifying the folder path where
the output harmonized dataset(s) and annotated data processing elements files
will be saved.</p></td>
    </tr>
    <tr>
      <th>name_report</th>
      <td><p>The name of the tibble to be generated of the annotated data
processing elements.</p></td>
    </tr>
    <tr>
      <th>.envir</th>
      <td><p>The environment to use. parent.frame() by default</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble and a csv file for each study-specific dataset that has been
harmonized saved in the specified output folder.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Must provide data processing elements, DataSchema, and study-specific datasets
in the environment.
The DataSchema is the core list of variables to be generate using study-specific
variable and must be in Maelstrom Research data dictionary format (with "Variables" and
"Categories” tibbles and standard descriptors for each). The data processing
elements file contains the harmonization potential and data processing instructions
for the harmonization project to generate harmonized datasets, in the Maelstrom
Research format.
If the harmonization process contains errors, the tibbles and csv files will not
be generated to avoid any version confusion. The user can correct their data
processing element file and re-run the process.
If the user identified errors and want to correct them later, they can specify
'undetermined' in the column 'harmo_rule' of their problematic data processing
element(s). Such data processing element will not be processed.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'><span class='co'># Read the files</span></span>
<span class='r-in'><span class='va'>index_DEMO</span> <span class='op'>&lt;-</span> <span class='fu'><a href='file_index_create.html'>file_index_create</a></span><span class='op'>(</span>folder <span class='op'>=</span> <span class='st'>"DEMO"</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='file_index_read.html'>file_index_read</a></span><span class='op'>(</span><span class='va'>index_DEMO</span>, file_path <span class='op'>=</span> <span class='st'>"study_specific_datasets"</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='file_index_read.html'>file_index_read</a></span><span class='op'>(</span><span class='va'>index_DEMO</span>, file_path <span class='op'>=</span> <span class='st'>"dataschema"</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='file_index_read.html'>file_index_read</a></span><span class='op'>(</span><span class='va'>index_DEMO</span>, file_path <span class='op'>=</span> <span class='st'>"data_processing_elements"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Example 1: all the process of harmonization with data processing elements with errors</span></span>
<span class='r-in'><span class='fu'>harmo_process</span><span class='op'>(</span></span>
<span class='r-in'>  dataschema <span class='op'>=</span> <span class='va'>DEMO_dataschema</span>,</span>
<span class='r-in'>  data_proc_elem <span class='op'>=</span> <span class='va'>`DEMO_data_processing_elements - with error`</span>,</span>
<span class='r-in'>  output_harmo_folder <span class='op'>=</span> <span class='st'>"DEMO/harmonized_datasets"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># The user can use the function harmo_summary() to access the errors. In the</span></span>
<span class='r-in'><span class='co'># environment, the user will find a report attached to harmonization.</span></span>
<span class='r-in'><span class='fu'><a href='harmo_summary.html'>harmo_summary</a></span><span class='op'>(</span><span class='va'>annotated_data_proc_elem</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span><span class='op'>(</span><span class='va'>annotated_data_proc_elem</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># After correction, re-run all the process of harmonization with the corrected</span></span>
<span class='r-in'><span class='co'># data processing elements.</span></span>
<span class='r-in'><span class='fu'>harmo_process</span><span class='op'>(</span></span>
<span class='r-in'>  dataschema <span class='op'>=</span> <span class='va'>DEMO_dataschema</span>,</span>
<span class='r-in'>  data_proc_elem <span class='op'>=</span> <span class='va'>`DEMO_data_processing_elements - final`</span>,</span>
<span class='r-in'>  name_report <span class='op'>=</span> <span class='st'>"final_report"</span>,</span>
<span class='r-in'>  output_harmo_folder <span class='op'>=</span> <span class='st'>"DEMO/harmonized_datasets"</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Guillaume Fabre.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


